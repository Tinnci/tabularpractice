# AI 增强学习系统设计文档

## 1. 动态知识思维导图 (Dynamic Knowledge Map)

### 目标
让学习者在宏观大局和具体细节之间自切换，加强概念联系。

### 架构设计
1.  **数据层**:
    *   **Nodes**: 知识点（Tags），包含层级关系（Parent/Child）。
    *   **Edges**: 关联关系（Related），不仅是层级，还有"相关性"（如：洛必达法则 -> 导数定义）。
    *   **Status**: 每个节点根据用户的做题情况（正确率、频率）显示不同颜色/大小。

2.  **UI 实现 (React Flow / D3.js)**:
    *   **Zoom Levels**:
        *   **L1 (宏观)**: 只显示一级学科（如：高等数学、线性代数），大小表示总题量，颜色表示总体掌握度。
        *   **L2 (章节)**: 点击 L1 展开，显示章节关系。
        *   **L3 (知识点)**: 具体的 Tag，点击可进入练习模式。
    *   **交互**: 双击节点进入"专注模式"，只显示该节点及其直接关联节点。

3.  **AI 增强 (Gemini Integration)**:
    *   **自动关联**: 使用 Gemini 分析题目内容，自动建议 Tag 之间的潜在联系（例如："这道题虽然考积分，但也用到了三角函数"）。
    *   **生成摘要**: 点击节点，AI 自动生成该知识点的"一句话总结"或"常见坑点"。

## 2. 适应性测验 (Adaptive Testing / CAT)

### 目标
根据用户回答动态调整难度，精准定位薄弱环节。

### 算法逻辑 (简化版 IRT - Item Response Theory)
1.  **难度评级**: 为每道题打标难度 (1-5)。
2.  **动态出题**:
    *   初始：从中等难度 (3) 开始。
    *   **正确**: 下一题难度 +1 (或从更难的题库中选)。
    *   **错误**: 下一题难度 -1，且**立即**插入一道同知识点的简单题进行"补救教学"。
3.  **终止条件**: 达到预定题数 或 标准误 (SEM) 低于阈值（即系统确信了你的水平）。

### AI 角色
*   **实时分析**: 用户做错时，AI 分析错误类型（计算错？概念错？），决定推荐什么难度的下一题。
*   **动态生成**: 如果题库中没有合适的题目，调用 Gemini **实时生成**一道变体题（Few-shot prompting: "参考这道题，生成一道考查相同知识点但数字更简单的题目"）。

## 3. 互动式填空与脚手架

### 目标
在做题过程中提供渐进式支持。

### 实现方案
*   **AI 填空生成**:
    *   Prompt: "将这道题的解析转换为填空题，挖掉关键步骤（如公式变换、关键结论），保留引导词。"
    *   UI: 用户填入关键步，AI 验证（模糊匹配）。
*   **苏格拉底式引导**:
    *   不是直接给出答案，而是通过 Chat 界面提问："你注意到了分母的特点吗？"

## 实施路线图

1.  **Phase 1 (已完成)**: 设置面板集成 API Key，基础题目导入。
2.  **Phase 2 (当前)**: 完善 `EurekaPanel`，提供静态交互脚手架。
3.  **Phase 3**: 开发 `KnowledgeGraph` 组件，实现基础的分层缩放。
4.  **Phase 4**: 实现 `AdaptiveQuiz` 引擎，接入 AI 实时生成变体题。
